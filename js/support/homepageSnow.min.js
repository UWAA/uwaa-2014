function snow(){ctx.clearRect(0,0,canvas.width,canvas.height);for(var a=0;a<flakeCount;a++){var b=flakes[a],c=mX,d=mY,e=150,f=b.x,g=b.y,h=Math.sqrt((f-c)*(f-c)+(g-d)*(g-d));if(h<e){var i=e/(h*h),j=(c-f)/h,k=(d-g)/h,l=i/2;b.velX-=l*j,b.velY-=l*k}else b.velX*=.98,b.velY<=b.speed&&(b.velY=b.speed),b.velX+=Math.cos(b.step+=.05)*b.stepSize;ctx.fillStyle="rgba(255,255,255,"+b.opacity+")",b.y+=b.velY,b.x+=b.velX,(b.y>=canvas.height||b.y<=0)&&reset(b),(b.x>=canvas.width||b.x<=0)&&reset(b),ctx.beginPath(),ctx.arc(b.x,b.y,b.size,0,2*Math.PI),ctx.fill()}requestAnimationFrame(snow)}function reset(a){a.x=Math.floor(Math.random()*canvas.width),a.y=0,a.size=3*Math.random()+2,a.speed=1*Math.random()+.5,a.velY=a.speed,a.velX=0,a.opacity=.5*Math.random()+.3}function init(){for(var a=0;a<flakeCount;a++){var b=Math.floor(Math.random()*canvas.width),c=Math.floor(Math.random()*canvas.height),d=3*Math.random()+2,e=1*Math.random()+.5,f=.5*Math.random()+.3;flakes.push({speed:e,velY:e,velX:0,x:b,y:c,size:d,stepSize:Math.random()/30,step:0,opacity:f})}snow()}!function(){var a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)};window.requestAnimationFrame=a}();var flakes=[],canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),flakeCount=400,mX=-100,mY=-100;canvas.width=window.innerWidth,canvas.height=window.innerHeight,canvas.addEventListener("mousemove",function(a){mX=a.clientX,mY=a.clientY}),window.addEventListener("resize",function(){canvas.width=window.innerWidth,canvas.height=window.innerHeight}),init();